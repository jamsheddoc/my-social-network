<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Мои сообщения</title>
	<link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
	</head>
<body>
    <div class="chat-container">
        <div class="chat-sidebar">
              <header class="top-nav">
    <div class="logo" onclick="window.location.href='/index.html'" style="cursor: pointer; user-select: none;">
        <i class="fas fa-arrow-left" style="font-size: 16px; margin-right: 10px; opacity: 0.7;"></i> 
        MyNetwork
    </div>
</header>
              <div class="sidebar-header">
                <h3>Диалоги</h3>
				<button onclick="openGroupModal()" class="icon-btn"><i class="fas fa-users"></i></button>
              </div>
            <div id="users-list" class="users-list"></div>
        </div>

        <div class="chat-main">
            <div id="chat-header" class="chat-header">
                Выберите чат, чтобы начать общение
            </div>

            <div id="typing-indicator" style="font-size: 12px; color: #007bff; padding: 5px 15px; display: none; height: 20px; font-style: italic;">
                </div>

            <div id="chat-messages" class="messages-area"></div>

            <div id="input-block" class="chat-input-row" style="display: none;">
               <button type="button" class="icon-btn" onclick="document.getElementById('fileInput').click()">
                <i class="fas fa-paperclip"></i>
                  </button>
                   <input type="file" id="fileInput" style="display:none" onchange="sendFile(this.files[0])">
                   <button onclick="startCall()" class="icon-btn"><i class="fas fa-video"></i></button>
                    <button type="button" id="voiceBtn" class="icon-btn">
                     <i class="fas fa-microphone"></i>
                     </button>

                     <input type="text" id="messageText" placeholder="Напишите сообщение..." autocomplete="off">
                     <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
             </div>
        </div>
    </div>
    <div id="video-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:10000; color:white; text-align:center; padding-top:50px;">
     <h3>Видеозвонок с <span id="remote-name">...</span></h3>
     <div style="display:flex; justify-content:center; gap:20px; margin-bottom:20px;">
        <video id="localVideo" autoplay muted style="width:200px; border:2px solid white; border-radius:10px;"></video>
        <video id="remoteVideo" autoplay style="width:500px; border:2px solid #007bff; border-radius:10px;"></video>
     </div>
     <button onclick="endCall()" style="background:#ff4757; color:white; border:none; padding:15px 30px; border-radius:30px; cursor:pointer;">
        <i class="fas fa-phone-slash"></i> Завершить
      </button>
    </div>
    <div id="groupModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:20000; color:white; padding:20px;">
        <div style="background:#222; max-width:400px; margin:auto; padding:20px; border-radius:10px;">
        <h4>Создать группу</h4>
        <input type="text" id="groupName" placeholder="Название группы" style="width:100%; margin-bottom:10px; padding:8px;">
        <div id="members-select-list" style="max-height:200px; overflow-y:auto; margin-bottom:10px;">
            </div>
        <button onclick="createNewGroup()" style="background:#007bff; color:white; border:none; padding:10px; width:100%; cursor:pointer;">Создать</button>
        <button onclick="closeGroupModal()" style="background:transparent; color:gray; border:none; width:100%; margin-top:10px;">Отмена</button>
       </div>
    </div>
<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<script src="/js/video.js"></script>
<script src="/js/messages.js"></script>
</body>
</html>